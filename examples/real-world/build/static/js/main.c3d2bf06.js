var main_library=webpackJsonp_name__library([2],{136:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(231),l=a(r);t.default=l.default},137:function(e,t,n){"use strict";function a(e){var t=l.BASE_URL+"/accesstoken",n=new Headers;return n.append("Content-Type","application/json"),fetch(t,{method:"POST",headers:n,body:JSON.stringify({accesstoken:e})}).then(function(e){return e.json()})}function r(e){var t=l.BASE_URL+"/user/"+e;return fetch(t).then(function(e){return e.json()})}Object.defineProperty(t,"__esModule",{value:!0}),t.login=a,t.getUserInfo=r;var l=n(84)},227:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=n(0),l=a(r),o=n(19),s=a(o);n(331),n(332),n(341);var u=document.getElementById("root"),c=function(){var e=n(229).default;s.default.render(l.default.createElement(e,null),u)};c()},229:function(e,t,n){"use strict";e.exports=n(230)},230:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),l=a(r),o=n(61),s=n(271),u=a(s),c=function(){return l.default.createElement(o.Router,{history:o.hashHistory,routes:u.default})};t.default=c},231:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),i=null,p=!1,d=function(){p=!0;var e=n(278);e(function(e){i=e,p=!0})},f=function(e){function t(e){r(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getMarkdownText=function(){var e=n.state.editorState;if(!e)return"";var t=i,a=t.Draft.convertToRaw,r=t.draftToMarkdown;return r(a(e.getCurrentContent())).trim()},n.getHtmlText=function(){var e=n.state.editorState;if(!e)return"";var t=i,a=t.Draft.convertToRaw,r=t.draftToHtml;return r(a(e.getCurrentContent()))},n.checkEditorLoader=function(){n.editorLoader=setInterval(function(){i&&(clearInterval(n.editorLoader),delete n.editorLoader,n.setState({loaded:!0}))},100)},n.clear=function(){n.setState({editorState:void 0})},n.setPlainText=function(e){var t=i,a=t.Draft,r=a.ContentState,l=a.EditorState,o=r.createFromText(e),s=l.createWithContent(o);n.setState({editorState:s})},n.handleEditorStateChange=function(e){n.setState({editorState:e})},n.render=function(){var e=n.state,t=e.loaded,a=e.editorState;if(!t)return c.default.createElement("div",null,"loading...");var r=i,l=r.ReactDraftWYSIWYG;return c.default.createElement(l,{editorState:a,toolbar:{options:["blockType","list","inline","link","emoji","image"]},onEditorStateChange:n.handleEditorStateChange})},n.state={loaded:!!i,editorState:void 0},n.editorLoader=null,n}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.state.loaded||p||d()}},{key:"componentDidMount",value:function(){this.checkEditorLoader()}},{key:"componentWillUnmount",value:function(){this.editorLoader&&clearInterval(this.editorLoader)}}]),t}(u.Component);t.default=f},232:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(6),i=a(c),p=n(0),d=a(p),f=n(18),m={xs:12,md:8,lg:9},b={xsHidden:!0,smHidden:!0,md:4,lg:3},h=function(e){function t(){return l(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.sidebar,a=e.children,l=r(e,["className","sidebar","children"]);return d.default.createElement(f.Grid,Object.assign({},l,{className:(0,i.default)(t,"MainLayout")}),d.default.createElement(f.Row,{className:"show-grid"},d.default.createElement(f.Col,n!==!1?m:{},a),(0,p.isValidElement)(n)?d.default.createElement(f.Col,b,n):null))}}]),t}(p.Component);h.propTypes={className:p.PropTypes.string,sidebar:p.PropTypes.oneOfType([p.PropTypes.element,p.PropTypes.boolean])},h.defaultProps={sidebar:!1},t.default=h},233:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),i=n(18),p=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,u=Array(s),p=0;p<s;p++)u[p]=arguments[p];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.renderLoading=function(){var e=a.props.loading;return e?c.default.createElement(i.ProgressBar,{active:!0,bsStyle:"info",label:"加载中...",now:100,striped:!0}):null},a.renderWarning=function(){var e=a.props.warning;return e?c.default.createElement(i.Alert,{bsStyle:"warning"},e):null},a.renderError=function(){var e=a.props.error;return e?c.default.createElement(i.Alert,{bsStyle:"danger"},e):null},o=n,l(a,o)}return o(t,e),s(t,[{key:"render",value:function(){var e=this.renderLoading()||this.renderWarning()||this.renderError();return c.default.createElement("div",{className:"ProgressWrapper"},e?e:this.props.children)}}]),t}(u.Component);p.propTypes={loading:u.PropTypes.bool,warning:u.PropTypes.oneOfType([u.PropTypes.bool,u.PropTypes.string,u.PropTypes.element]),error:u.PropTypes.oneOfType([u.PropTypes.bool,u.PropTypes.string,u.PropTypes.element])},p.defaultProps={loading:!1,warning:!1,error:!1},t.default=p},234:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),i=n(18),p=n(237),d=a(p),f=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.handleFavorite=function(){var e=a.props,t=e.id,n=e.onFavorite;n&&n(t)},a.handleReply=function(){var e=a.props,t=e.id,n=e.onReply;n&&n(t)},a.handleRemove=function(){var e=a.props,t=e.id,n=e.onRemove;n&&n(t)},o=n,l(a,o)}return o(t,e),s(t,[{key:"renderAction",value:function(){var e=this.context.user,t=this.props,n=t.author,a=t.ups,r=t.isFavorite,l=(e&&n&&e.loginname===n.loginname,a&&a.length||0);return c.default.createElement(i.ButtonToolbar,null,c.default.createElement(i.ButtonGroup,{bsSize:"xsmall"},c.default.createElement(i.Button,{bsStyle:"link",onClick:this.handleFavorite},c.default.createElement(i.Glyphicon,{glyph:r?"heart":"heart-empty"}),c.default.createElement("span",null,l>0?" "+l+" ":"")),null,null,c.default.createElement(i.Button,{bsStyle:"link",onClick:this.handleReply},c.default.createElement(i.Glyphicon,{glyph:"comment"}))))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.author,a=e.content,r=e.create_at,l=e.index,o=n.loginname,s="/user/"+o,u=n.avatar_url;return c.default.createElement("div",{className:"ReplyAbstract"},c.default.createElement("div",{className:"author_content"},c.default.createElement("a",{className:"user_avatar",href:s},c.default.createElement("img",{src:u,title:o,alt:o})),c.default.createElement("div",{className:"user_info"},c.default.createElement("a",{className:"dark reply_author",href:u},o),c.default.createElement("a",{className:"reply_time",href:"#"+t},l+"楼 • "+r.substring(0,10))),c.default.createElement("div",{className:"user_action"},this.renderAction())),c.default.createElement(d.default,{html:a}))}}]),t}(u.Component);f.contextTypes={user:u.PropTypes.object},f.propTypes={id:u.PropTypes.string,author:u.PropTypes.object,content:u.PropTypes.string,create_at:u.PropTypes.string,reply_id:u.PropTypes.string,ups:u.PropTypes.array,index:u.PropTypes.number,isFavorite:u.PropTypes.bool,onFavorite:u.PropTypes.func,onReply:u.PropTypes.func,onRemove:u.PropTypes.func},t.default=f},235:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(234),l=a(r);n(335),t.default=l.default},236:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.html,n=void 0===t?"":t;return o.default.createElement("div",{className:"ReplyContent",dangerouslySetInnerHTML:{__html:n}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var l=n(0),o=a(l)},237:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(236),l=a(r);n(336),t.default=l.default},238:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),i=n(18),p=n(25),d=n(243),f=a(d),m=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.userThumbnailTitle,n=e.user,a=e.topicReleasable,r=e.barcodeVisible;return c.default.createElement("div",null,c.default.createElement(f.default,{title:t,user:n}),a?c.default.createElement(i.Panel,null,c.default.createElement(p.LinkContainer,{to:"/topic/create"},c.default.createElement(i.Button,{bsStyle:"primary"},"发布话题"))):null,r?c.default.createElement(i.Panel,{header:"客户端二维码"},c.default.createElement(i.Image,{rounded:!0,responsive:!0,src:"https://dn-cnode.qbox.me/FtG0YVgQ6iginiLpf9W4_ShjiLfU"})):null)}}]),t}(u.Component);m.propTypes={userThumbnailTitle:u.PropTypes.string,user:u.PropTypes.object,topicReleasable:u.PropTypes.bool,barcodeVisible:u.PropTypes.bool},t.default=m},239:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),i=n(61),p=n(6),d=a(p),f=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"renderBadge",value:function(){var e=this.props,t=e.top,n=e.good,a=e.tab,r="";if(t)r="置顶";else if(n)r="精华";else switch(a){case"share":r="分享";break;case"ask":r="问答";break;case"job":r="招聘";break;case"good":default:r="精华"}return c.default.createElement("span",{className:(0,d.default)("topiclist-tab",{put_top:t,put_good:n})},r)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.title,a=e.author,r=a.avatar_url,l=a.loginname,o=e.reply_count,s=e.visit_count;return c.default.createElement("div",{className:"TopicAbstract"},c.default.createElement(i.Link,{className:"user_avatar pull-left",to:"/user/"+l},c.default.createElement("img",{src:r,title:l,alt:l})),c.default.createElement("span",{className:"reply_count pull-left"},c.default.createElement("span",{className:"count_of_replies",title:"回复数"},o),c.default.createElement("span",{className:"count_seperator"},"/"),c.default.createElement("span",{className:"count_of_visits",title:"点击数"},s)),c.default.createElement(i.Link,{className:"last_time pull-right",to:"/topic/"+t},c.default.createElement("img",{className:"user_small_avatar",src:r,alt:r}),c.default.createElement("span",{className:"last_active_time"},"3 小时前")),c.default.createElement("div",{className:"topic_title_wrapper"},this.renderBadge(),c.default.createElement(i.Link,{className:"topic_title",to:"/topic/"+t,title:n},n)))}}]),t}(u.Component);f.propTypes={id:u.PropTypes.string,tab:u.PropTypes.string,title:u.PropTypes.string,author_id:u.PropTypes.string,author:u.PropTypes.object,top:u.PropTypes.bool,good:u.PropTypes.bool,content:u.PropTypes.string,reply_count:u.PropTypes.number,visit_count:u.PropTypes.number,create_at:u.PropTypes.string,last_reply_at:u.PropTypes.string},t.default=f},240:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(239),l=a(r);n(338),t.default=l.default},241:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.html,n=void 0===t?"":t;return o.default.createElement("div",{className:"TopicContent",dangerouslySetInnerHTML:{__html:n}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var l=n(0),o=a(l)},242:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),u=a(s),c=n(18),i=n(61),p=n(25),d=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,d=Array(s),f=0;f<s;f++)d[f]=arguments[f];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(d))),a.renderUserThumbnail=function(){var e=a.props,t=e.title,n=e.user,r=n.loginname,l=n.avatar_url;return u.default.createElement(c.Panel,{className:"UserThumbnail",header:t},u.default.createElement("p",null,u.default.createElement(i.Link,{to:"/user/"+r},u.default.createElement(c.Image,{className:"user-avatar",responsive:!0,rounded:!0,src:l,alt:r}),u.default.createElement("span",{className:"user-name"},r))),u.default.createElement("p",null,"积分：5"),u.default.createElement("p",{className:"signature"},"“ 这家伙很懒，什么个性签名都没有留下。 ”"))},a.render=function(){var e=a.props.user;return e?a.renderUserThumbnail():u.default.createElement(c.Panel,null,u.default.createElement("p",null,"CNode：Node.js专业中文社区"),u.default.createElement("p",null,"您可以选择登录, 以获取更好的体验"),u.default.createElement(p.LinkContainer,{to:"signin"},u.default.createElement(c.Button,{bsStyle:"info"},"立即登录")))},o=n,l(a,o)}return o(t,e),t}(s.Component);d.propTypes={title:s.PropTypes.string,user:s.PropTypes.object},t.default=d},243:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(242),l=a(r);n(340),t.default=l.default},244:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return o.default.createElement(s.Grid,{id:"API"},o.default.createElement(s.Row,{className:"show-grid"},o.default.createElement(s.Col,{xs:12,md:8,lg:9},o.default.createElement(s.Panel,{header:o.default.createElement(s.Breadcrumb,null,o.default.createElement(u.LinkContainer,{onlyActiveOnIndex:!0,to:"/"},o.default.createElement(s.Breadcrumb.Item,null,o.default.createElement("span",null,"主页"))),o.default.createElement(s.Breadcrumb.Item,{active:!0},"API"))},o.default.createElement(i.default,{html:d.default})))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var l=n(0),o=a(l),s=n(18),u=n(25),c=n(62),i=a(c),p=n(245),d=a(p)},245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a='\n<div class="markdown-text"><p>以下 api 路径均以 <strong><a href="https://cnodejs.org/api/v1" target="_blank">https://cnodejs.org/api/v1</a></strong> 为前缀</p>\n<h3>主题</h3>\n<h4>get /topics 主题首页</h4>\n<p>接收 get 参数</p>\n<ul>\n<li>page <code>Number</code> 页数</li>\n<li>tab <code>String</code> 主题分类。目前有 <code>ask</code> <code>share</code> <code>job</code> <code>good</code></li>\n<li>limit <code>Number</code> 每一页的主题数量</li>\n<li>mdrender <code>String</code> 当为 <code>false</code> 时，不渲染。默认为 <code>true</code>，渲染出现的所有 markdown 格式文本。</li>\n</ul>\n<p>示例：<a href="/api/v1/topics" target="_blank">/api/v1/topics</a></p>\n<h4>get /topic/:id 主题详情</h4>\n<p>接收 get 参数</p>\n<ul>\n<li>mdrender <code>String</code> 当为 <code>false</code> 时，不渲染。默认为 <code>true</code>，渲染出现的所有 markdown 格式文本。</li>\n<li>accesstoken <code>String</code> 当需要知道一个主题是否被特定用户收藏时，才需要带此参数。会影响返回值中的 <code>is_collect</code> 值。</li>\n</ul>\n<p>示例：<a href="/api/v1/topic/5433d5e4e737cbe96dcef312" target="_blank">/api/v1/topic/5433d5e4e737cbe96dcef312</a></p>\n<h4>post /topics 新建主题</h4>\n<p>接收 post 参数</p>\n<ul>\n<li>accesstoken <code>String</code> 用户的 accessToken</li>\n<li>title <code>String</code> 标题</li>\n<li>tab <code>String</code> 目前有 <code>ask</code> <code>share</code> <code>job</code></li>\n<li>content <code>String</code> 主体内容</li>\n</ul>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="pln">success</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> topic_id</span><span class="pun">:</span><span class="pln"> </span><span class="str">\'5433d5e4e737cbe96dcef312\'</span><span class="pun">}</span></code></pre><h4>post /topics/update 编辑主题</h4>\n<p>接收 post 参数</p>\n<ul>\n<li>accesstoken <code>String</code> 用户的 accessToken</li>\n<li>topic_id <code>String</code> 主题id</li>\n<li>title <code>String</code> 标题</li>\n<li>tab <code>String</code> 目前有 <code>ask</code> <code>share</code> <code>job</code></li>\n<li>content <code>String</code> 主体内容</li>\n</ul>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="pln">success</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> topic_id</span><span class="pun">:</span><span class="pln"> </span><span class="str">\'5433d5e4e737cbe96dcef312\'</span><span class="pun">}</span></code></pre><h3>主题收藏</h3>\n<h4>post /topic_collect/collect 收藏主题</h4>\n<p>接收 post 参数</p>\n<ul>\n<li>accesstoken <code>String</code> 用户的 accessToken</li>\n<li>topic_id <code>String</code> 主题的id</li>\n</ul>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="str">"success"</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">}</span></code></pre><h4>post /topic_collect/de_collect 取消主题</h4>\n<p>接收 post 参数</p>\n<ul>\n<li>accesstoken <code>String</code> 用户的 accessToken</li>\n<li>topic_id <code>String</code> 主题的id</li>\n</ul>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="pln">success</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">}</span></code></pre><h4>get /topic_collect/:loginname 用户所收藏的主题</h4>\n<p>示例：<a href="/api/v1/topic_collect/alsotang" target="_blank">/api/v1/topic_collect/alsotang</a></p>\n<h3>评论</h3>\n<h4>post /topic/:topic_id/replies 新建评论</h4>\n<p>接收 post 参数</p>\n<ul>\n<li>accesstoken <code>String</code> 用户的 accessToken</li>\n<li>content <code>String</code> 评论的主体</li>\n<li>reply_id <code>String</code> 如果这个评论是对另一个评论的回复，请务必带上此字段。这样前端就可以构建出评论线索图。</li>\n</ul>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="pln">success</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> reply_id</span><span class="pun">:</span><span class="pln"> </span><span class="str">\'5433d5e4e737cbe96dcef312\'</span><span class="pun">}</span></code></pre><h4>post /reply/:reply_id/ups 为评论点赞</h4>\n<p>接受 post 参数</p>\n<ul>\n<li>accesstoken <code>String</code></li>\n</ul>\n<p>接口会自动判断用户是否已点赞，如果否，则点赞；如果是，则取消点赞。点赞的动作反应在返回数据的 <code>action</code> 字段中，<code>up</code> or <code>down</code>。</p>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="str">"success"</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> </span><span class="str">"action"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"down"</span><span class="pun">}</span></code></pre><h3>用户</h3>\n<h4>get /user/:loginname 用户详情</h4>\n<p>示例：<a href="/api/v1/user/alsotang" target="_blank">/api/v1/user/alsotang</a></p>\n<h4>post /accesstoken 验证 accessToken 的正确性</h4>\n<p>接收 post 参数</p>\n<ul>\n<li>accesstoken <code>String</code> 用户的 accessToken</li>\n</ul>\n<p>如果成功匹配上用户，返回成功信息。否则 403。</p>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="pln">success</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> loginname</span><span class="pun">:</span><span class="pln"> req</span><span class="pun">.</span><span class="pln">user</span><span class="pun">.</span><span class="pln">loginname</span><span class="pun">}</span></code></pre><h3>消息通知</h3>\n<h4>get /message/count 获取未读消息数</h4>\n<p>接收 get 参数</p>\n<ul>\n<li>accesstoken <code>String</code></li>\n</ul>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="pln"> data</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">}</span></code></pre><h4>get /messages 获取已读和未读消息</h4>\n<p>接收 get 参数</p>\n<ul>\n<li>accesstoken <code>String</code></li>\n<li>mdrender <code>String</code> 当为 <code>false</code> 时，不渲染。默认为 <code>true</code>，渲染出现的所有 markdown 格式文本。</li>\n</ul>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="pln">\n  data</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">\n    has_read_messages</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[],</span><span class="pln">\n    hasnot_read_messages</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">\n      </span><span class="pun">{</span><span class="pln">\n        id</span><span class="pun">:</span><span class="pln"> </span><span class="str">"543fb7abae523bbc80412b26"</span><span class="pun">,</span><span class="pln">\n        type</span><span class="pun">:</span><span class="pln"> </span><span class="str">"at"</span><span class="pun">,</span><span class="pln">\n        has_read</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">,</span><span class="pln">\n        author</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">\n          loginname</span><span class="pun">:</span><span class="pln"> </span><span class="str">"alsotang"</span><span class="pun">,</span><span class="pln">\n          avatar_url</span><span class="pun">:</span><span class="pln"> </span><span class="str">"https://avatars.githubusercontent.com/u/1147375?v=2"</span><span class="pln">\n        </span><span class="pun">},</span><span class="pln">\n        topic</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">\n          id</span><span class="pun">:</span><span class="pln"> </span><span class="str">"542d6ecb9ecb3db94b2b3d0f"</span><span class="pun">,</span><span class="pln">\n          title</span><span class="pun">:</span><span class="pln"> </span><span class="str">"adfadfadfasdf"</span><span class="pun">,</span><span class="pln">\n          last_reply_at</span><span class="pun">:</span><span class="pln"> </span><span class="str">"2014-10-18T07:47:22.563Z"</span><span class="pln">\n        </span><span class="pun">},</span><span class="pln">\n        reply</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">\n          id</span><span class="pun">:</span><span class="pln"> </span><span class="str">"543fb7abae523bbc80412b24"</span><span class="pun">,</span><span class="pln">\n          content</span><span class="pun">:</span><span class="pln"> </span><span class="str">"[@alsotang](/user/alsotang) 哈哈"</span><span class="pun">,</span><span class="pln">\n          ups</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="pun">],</span><span class="pln">\n          create_at</span><span class="pun">:</span><span class="pln"> </span><span class="str">"2014-10-16T12:18:51.566Z"</span><span class="pln">\n          </span><span class="pun">}</span><span class="pln">\n        </span><span class="pun">},</span><span class="pln">\n    </span><span class="pun">...</span><span class="pln">\n    </span><span class="pun">]</span><span class="pln">\n  </span><span class="pun">}</span><span class="pln">\n</span><span class="pun">}</span></code></pre><h4>post /message/mark_all 标记全部已读</h4>\n<p>接收 post 参数</p>\n<ul>\n<li>accesstoken <code>String</code></li>\n</ul>\n<p>返回值示例</p>\n<pre class="prettyprint language-js"><code><span class="pun">{</span><span class="pln"> success</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">,</span><span class="pln">\n  marked_msgs</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> id</span><span class="pun">:</span><span class="pln"> </span><span class="str">\'544ce385aeaeb5931556c6f9\'</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code></pre><h3>知识点</h3>\n<ol>\n<li>如何获取 accessToken？\n用户登录后，在设置页面可以看到自己的 accessToken。\n建议各移动端应用使用手机扫码的形式登录，验证使用 <code>/accesstoken</code> 接口，登录后长期保存 accessToken。</li>\n</ol>\n</div>\n';t.default=a},246:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(244),l=a(r);n(342),t.default=l.default},247:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t.logon,a=t.user;return o.default.createElement(d.default,{id:"About",sidebar:o.default.createElement(m.default,{userThumbnailTitle:"个人信息",user:a,topicReleasable:n,barcodeVisible:!0})},o.default.createElement(s.Panel,{header:o.default.createElement(s.Breadcrumb,null,o.default.createElement(u.LinkContainer,{onlyActiveOnIndex:!0,to:"/"},o.default.createElement(s.Breadcrumb.Item,null,o.default.createElement("span",null,"主页"))),o.default.createElement(s.Breadcrumb.Item,{active:!0},"关于"))},o.default.createElement(i.default,{html:h.default})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var l=n(0),o=a(l),s=n(18),u=n(25),c=n(62),i=a(c),p=n(29),d=a(p),f=n(35),m=a(f),b=n(248),h=a(b);r.contextTypes={logon:l.PropTypes.bool,user:l.PropTypes.object}},248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a='\n<div class="markdown-text"><h3>关于</h3>\n<p>CNode 社区为国内最大最具影响力的 Node.js 开源技术社区，致力于 Node.js 的技术研究。</p>\n<p>CNode 社区由一批热爱 Node.js 技术的工程师发起，目前已经吸引了互联网各个公司的专业技术人员加入，我们非常欢迎更多对 Node.js 感兴趣的朋友。</p>\n<p>CNode 的 SLA 保证是，一个9，即 90.000000%。</p>\n<p>社区目前由 <a href="http://cnodejs.org/user/alsotang" target="_blank">@alsotang</a> 在维护，有问题请联系：<a href="https://github.com/alsotang" target="_blank">https://github.com/alsotang</a></p>\n<p>请关注我们的官方微博：<a href="http://weibo.com/cnodejs" target="_blank">http://weibo.com/cnodejs</a></p>\n<h3>移动客户端</h3>\n<p>客户端由 <a href="https://cnodejs.org/user/soliury" target="_blank">@soliury</a> 开发维护。</p>\n<p>源码地址： <a href="https://github.com/soliury/noder-react-native" target="_blank">https://github.com/soliury/noder-react-native</a> 。</p>\n<p>立即体验 CNode 客户端，直接扫描页面右侧二维码。</p>\n<p>另，安卓用户同时可选择：<a href="https://github.com/TakWolf/CNode-Material-Design" target="_blank">https://github.com/TakWolf/CNode-Material-Design</a> ，这是 Java 原生开发的安卓客户端。</p>\n</div>\n';
t.default=a},249:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(247),l=a(r);n(343),t.default=l.default},250:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),i=n(18),p=n(61),d=n(25),f=function(e){function t(e){r(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLogin=function(e,t){n.setState({logon:!0,user:t,accessToken:e}),n.context.router.replace("/")},n.handleLogout=function(){n.setState({logon:!1,user:null}),n.context.router.replace("/")},n.state={logon:!1,user:null,accessToken:""},n}return o(t,e),s(t,[{key:"getChildContext",value:function(){var e=this.state,t=e.logon,n=e.user,a=e.accessToken;return{logon:t,user:n,accessToken:a,onLogin:this.handleLogin}}},{key:"renderLogoutNavbar",value:function(){return c.default.createElement(i.Navbar,{inverse:!0},c.default.createElement(i.Navbar.Header,null,c.default.createElement(i.Navbar.Brand,null,c.default.createElement(p.Link,{to:"/"},"CNODE")),c.default.createElement(i.Navbar.Toggle,null)),c.default.createElement(i.Navbar.Collapse,null,c.default.createElement(i.Navbar.Form,{pullLeft:!0},c.default.createElement(i.FormGroup,null,c.default.createElement(i.FormControl,{type:"text",placeholder:"Search"}))),c.default.createElement(i.Nav,{pullRight:!0},c.default.createElement(d.LinkContainer,{to:"/"},c.default.createElement(i.NavItem,null,"首页")),c.default.createElement(d.LinkContainer,{to:"/getstart"},c.default.createElement(i.NavItem,null,"新手入门")),c.default.createElement(d.LinkContainer,{to:"/api"},c.default.createElement(i.NavItem,null,"API")),c.default.createElement(d.LinkContainer,{to:"/about"},c.default.createElement(i.NavItem,null,"关于")),c.default.createElement(d.LinkContainer,{to:"/signin"},c.default.createElement(i.NavItem,null,"登录")))))}},{key:"renderLogonNavbar",value:function(){return c.default.createElement(i.Navbar,{inverse:!0},c.default.createElement(i.Navbar.Header,null,c.default.createElement(i.Navbar.Brand,null,c.default.createElement(p.Link,{to:"/"},"CNODE")),c.default.createElement(i.Navbar.Toggle,null)),c.default.createElement(i.Navbar.Collapse,null,c.default.createElement(i.Navbar.Form,{pullLeft:!0},c.default.createElement(i.FormGroup,null,c.default.createElement(i.FormControl,{type:"text",placeholder:"Search"}))),c.default.createElement(i.Nav,{pullRight:!0},c.default.createElement(d.LinkContainer,{to:"/"},c.default.createElement(i.NavItem,null,"首页")),c.default.createElement(d.LinkContainer,{to:"/my/messages"},c.default.createElement(i.NavItem,null,"未读消息")),c.default.createElement(d.LinkContainer,{to:"/getstart"},c.default.createElement(i.NavItem,null,"新手入门")),c.default.createElement(d.LinkContainer,{to:"/api"},c.default.createElement(i.NavItem,null,"API")),c.default.createElement(d.LinkContainer,{to:"/about"},c.default.createElement(i.NavItem,null,"关于")),c.default.createElement(d.LinkContainer,{to:"/setting"},c.default.createElement(i.NavItem,null,"设置")),c.default.createElement(i.NavItem,{onClick:this.handleLogout},"退出"))))}},{key:"renderFooter",value:function(){return c.default.createElement("div",{id:"footer"},c.default.createElement("div",{className:"container"},c.default.createElement("div",{className:"links"},c.default.createElement("a",{className:"dark",href:"https://cnodejs.org/rss"},"RSS"),c.default.createElement("span",null,"|"),c.default.createElement("a",{className:"dark",href:"https://github.com/cnodejs/nodeclub/"},"源码地址")),c.default.createElement("div",{className:"col_fade"},c.default.createElement("p",null,"CNode 社区为国内最专业的 Node.js 开源技术社区，致力于 Node.js 的技术研究。"),c.default.createElement("p",null,c.default.createElement("span",null,"服务器赞助商为"),c.default.createElement("a",{href:"http://www.ucloud.cn/",target:"_blank",className:"sponsor_outlink","data-label":"ucloud_bottom"},c.default.createElement("img",{src:"https://dn-cnode.qbox.me/FuIpEaM9bvsZKnQ3QfPtBHWQmLM9",title:"ucloud",alt:"ucloud"})),c.default.createElement("span",null,"，存储赞助商为"),c.default.createElement("a",{href:"http://www.qiniu.com/",target:"_blank",className:"sponsor_outlink","data-label":"qiniu_bottom"},c.default.createElement("img",{src:"https://dn-cnode.qbox.me/Fg0jtDIcTqVC049oVu5-sn6Om4NX",title:"qiniu",alt:"七牛云存储"})),c.default.createElement("span",null,"，由"),c.default.createElement("a",{href:"https://alinode.aliyun.com/?ref=cnode",target:"_blank",className:"sponsor_outlink","data-label":"alinode_bottom"},c.default.createElement("img",{src:"https://dn-cnode.qbox.me/FpMZk31PDyxkC8yStmMQL4XroaGD",title:"alinode",alt:"alinode",height:"54px"})),c.default.createElement("span",null,"提供应用性能服务。")),c.default.createElement("p",null,c.default.createElement("span",null,"新手搭建 Node.js 服务器，推荐使用无需备案的"),c.default.createElement("a",{href:"https://www.digitalocean.com/?refcode=eba02656eeb3"},"DigitalOcean(https://www.digitalocean.com/)")))))}},{key:"render",value:function(){var e=this.state.logon;return c.default.createElement("div",{id:"App"},e?this.renderLogonNavbar():this.renderLogoutNavbar(),this.props.children,this.renderFooter())}}]),t}(u.Component);f.contextTypes={router:u.PropTypes.object},f.childContextTypes={logon:u.PropTypes.bool,user:u.PropTypes.object,accessToken:u.PropTypes.string,onLogin:u.PropTypes.func},t.default=f},251:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(250),l=a(r);n(344),t.default=l.default},252:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t.logon,a=t.user;return o.default.createElement(i.default,{id:"GetStart",sidebar:o.default.createElement(d.default,{userThumbnailTitle:"个人信息",user:a,topicReleasable:n,barcodeVisible:!0})},o.default.createElement(s.Panel,{header:o.default.createElement(s.Breadcrumb,null,o.default.createElement(u.LinkContainer,{onlyActiveOnIndex:!0,to:"/"},o.default.createElement(s.Breadcrumb.Item,null,o.default.createElement("span",null,"主页"))),o.default.createElement(s.Breadcrumb.Item,{active:!0},"Node.js 新手入门"))},o.default.createElement(m.default,{html:h.default})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var l=n(0),o=a(l),s=n(18),u=n(25),c=n(29),i=a(c),p=n(35),d=a(p),f=n(62),m=a(f),b=n(253),h=a(b);r.contextTypes={logon:l.PropTypes.bool,user:l.PropTypes.object}},253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a='\n<div class="markdown-text"><h2>Node.js 入门</h2>\n<p>《<strong>快速搭建 Node.js 开发环境以及加速 npm</strong>》</p>\n<p><a href="http://fengmk2.com/blog/2014/03/node-env-and-faster-npm.html" target="_blank">http://fengmk2.com/blog/2014/03/node-env-and-faster-npm.html</a></p>\n<p>《<strong>Node.js 包教不包会</strong>》</p>\n<p><a href="https://github.com/alsotang/node-lessons" target="_blank">https://github.com/alsotang/node-lessons</a></p>\n<p>《<strong>ECMAScript 6入门</strong>》</p>\n<p><a href="http://es6.ruanyifeng.com/" target="_blank">http://es6.ruanyifeng.com/</a></p>\n<p>《<strong>七天学会NodeJS</strong>》</p>\n<p><a href="https://github.com/nqdeng/7-days-nodejs" target="_blank">https://github.com/nqdeng/7-days-nodejs</a></p>\n<h2>Node.js 资源</h2>\n<p>《<strong>前端资源教程</strong>》</p>\n<p><a href="https://cnodejs.org/topic/56ef3edd532839c33a99d00e" target="_blank">https://cnodejs.org/topic/56ef3edd532839c33a99d00e</a></p>\n<p>《<strong>国内的 npm 镜像源</strong>》</p>\n<p><a href="http://cnpmjs.org/" target="_blank">http://cnpmjs.org/</a></p>\n<p>《<strong>node weekly</strong>》</p>\n<p><a href="http://nodeweekly.com/issues" target="_blank">http://nodeweekly.com/issues</a></p>\n<p>《<strong>node123-<em>node.js中文资料导航</em></strong>》</p>\n<p><a href="https://github.com/youyudehexie/node123" target="_blank">https://github.com/youyudehexie/node123</a></p>\n<p>《<strong>A curated list of delightful Node.js packages and resources</strong>》</p>\n<p><a href="https://github.com/sindresorhus/awesome-nodejs" target="_blank">https://github.com/sindresorhus/awesome-nodejs</a></p>\n<p>《<strong>Node.js Books</strong>》</p>\n<p><a href="https://github.com/pana/node-books" target="_blank">https://github.com/pana/node-books</a></p>\n<h2>Node.js 名人</h2>\n<p>《<strong>名人堂</strong>》</p>\n<p><a href="https://github.com/cnodejs/nodeclub/wiki/%E5%90%8D%E4%BA%BA%E5%A0%82" target="_blank">https://github.com/cnodejs/nodeclub/wiki/名人堂</a></p>\n<h2>Node.js 服务器</h2>\n<p>新手搭建 Node.js 服务器，推荐使用无需备案的 <a href="https://www.digitalocean.com/?refcode=eba02656eeb3" target="_blank">DigitalOcean(https://www.digitalocean.com/)</a></p>\n</div>\n';t.default=a},254:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(252),l=a(r);n(345),t.default=l.default},255:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),i=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",null,"404, Page is not found!")}}]),t}(u.Component);t.default=i},256:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(255),l=a(r);n(346),t.default=l.default},257:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),u=a(s),c=n(18),i=n(25),p=n(86),d=a(p),f=n(29),m=a(f),b=n(35),h=a(b),y=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,p=Array(s),d=0;d<s;d++)p[d]=arguments[d];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),a.isLogon=function(){var e=a.context.logon;return e},a.renderNotification=function(){return a.isLogon()?u.default.createElement(c.Panel,{header:u.default.createElement(c.Breadcrumb,null,u.default.createElement(i.LinkContainer,{onlyActiveOnIndex:!0,to:"/"},u.default.createElement(c.Breadcrumb.Item,null,u.default.createElement("span",null,"主页"))),u.default.createElement(c.Breadcrumb.Item,{active:!0},"新消息"))},"N/A"):null},a.renderSidebar=function(){if(!a.isLogon())return null;var e=a.context,t=e.logon,n=e.user;return u.default.createElement(h.default,{userThumbnailTitle:"个人信息",user:n,topicReleasable:t,barcodeVisible:!0})},a.render=function(){return u.default.createElement("div",{id:"Notification"},u.default.createElement(m.default,{sidebar:a.renderSidebar()},a.renderNotification()))},o=n,l(a,o)}return o(t,e),t}(s.Component);y.contextTypes={logon:s.PropTypes.bool,user:s.PropTypes.object},t.default=(0,d.default)(y)},258:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(257),l=a(r);n(347),t.default=l.default},259:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),p=r(i),d=n(19),f=n(18),m=n(85),b=a(m),h=n(272),y=a(h),g=n(83),v=r(g),_=n(29),E=r(_),T=n(62),j=r(T),O=n(35),P=r(O),w=n(235),k=r(w),S=n(136),C=r(S),N=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getReplyContent=function(){var e=n.refs.replyEditor;return e?{html:e.getHtmlText(),markdown:e.getMarkdownText()}:""},n.findReplyById=function(e){var t=n.state.topic.replies,a=-1,r=null;return t.some(function(t,n){return t.id===e&&(a=n,r=t,!0)}),{index:a,reply:r}},n.loadTopicDetail=function(){var e=n.context.accessToken;n.setState({loading:!0,error:!1}),b.getTopicById(e,n.props.params.id).then(function(e){var t=e.success,a=e.error_msg,r=e.data;if(!t)throw new Error(a||"未知错误");n.setState({loading:!1,topic:r})}).catch(function(e){n.setState({loading:!1,error:e.message})})},n.handleCollectToggle=function(){var e=n.context.accessToken,t=n.state.topic,a=t.id,r=t.is_collect;n.setState({collecting:!0}),r?b.deCollectTopic(e,a).then(function(e){var t=e.success,a=e.error_msg;if(!t)throw new Error(a||"未知错误");n.setState({collecting:!1,topic:Object.assign({},n.state.topic,{is_collect:!1})})}).catch(function(e){n.setState({collecting:!1})}):b.collectTopic(e,a).then(function(e){var t=e.success,a=e.error_msg;if(!t)throw new Error(a||"未知错误");n.setState({collecting:!1,topic:Object.assign({},n.state.topic,{is_collect:!0})})}).catch(function(e){n.setState({collecting:!1})})},n.handleReplyRelease=function(){var e=n.state,t=e.topic,a=e.repltTarget,r=e.replyReleasing;if(!r){var o=n.context,s=o.accessToken,u=o.user,c=n.getReplyContent(),i=c.markdown,p=c.html;i&&i.trim()&&(n.setState({replyReleasing:!0}),y.addReply(s,t.id,i,a).then(function(e){var r=e.success,o=e.error_msg,s=e.reply_id;if(!r)throw new Error(o||"未知错误");n.setState({topic:Object.assign({},t,{replies:[].concat(l(t.replies),[{author:u,content:p,create_at:(new Date).toISOString(),id:s,reply_id:a||null,ups:[]}])}),replyReleasing:!1,repltTarget:void 0})}).catch(function(e){n.setState({replyReleasing:!1})}))}},n.handleFavorite=function(e){var t=n.context,a=t.accessToken,r=t.logon,o=t.user;if(!r)return void alert("请先登录！");var s=o&&o.id||"";y.favoriteReply(a,e).then(function(t){var a=t.success,r=t.error_msg,o=t.action;if(!a)throw new Error(r||"未知错误");var u=n.state.topic.replies,c=n.findReplyById(e),i=c.index,p=c.reply;if(!p)throw new Error("未知错误");var d=p,f=p.ups,m=f.indexOf(s);"up"===o&&m<0?d=Object.assign({},p,{ups:[].concat(l(f),[s])}):"down"===o&&m>=0&&(d=Object.assign({},p,{ups:f.slice(0,m).concat(f.slice(m+1))})),p!==d&&(u[i]=d,n.setState({topic:Object.assign({},n.state.topic,{replies:[].concat(l(u))})}))}).catch(function(e){console.log(e)})},n.handleReplyReply=function(e){var t=n.context.logon;if(!t)return void alert("请先登录");var a=n.findReplyById(e),r=a.reply;r&&(n.refs.replyEditor&&n.refs.replyEditor.setPlainText("@"+r.author.loginname+" "),n.setState({repltTarget:e}),n.scrollToReplyRelease())},n.handleClearReply=function(){n.refs.replyEditor&&n.refs.replyEditor.clear(),n.setState({repltTarget:null})},n.scrollToReplyRelease=function(){var e=(0,d.findDOMNode)(n.refs.replyRelease);window.scrollTo(0,e.offsetTop)},n.scrollToReplyTarget=function(){var e=n.state.repltTarget;if(e){var t=n.findReplyById(e);if(t){var a=document.querySelectorAll("#TopicDetail .ReplyAbstract")[t.index];window.scrollTo(0,a.offsetTop)}}},n.renderTopic=function(){return p.default.createElement(f.Panel,{className:"topic",header:n.renderTopicHeader()},n.renderTopicDetail())},n.renderTopicHeader=function(){var e=n.state,t=e.loading,a=e.topic,r=e.collecting;if(t||!a)return null;var l=n.context.logon,o=a.title,s=a.create_at,u=a.author,c=a.visit_count,i=a.tab,d=a.is_collect,m="";return m=d?r?"取消收藏中...":"取消收藏":r?"收藏中...":"收藏",p.default.createElement("div",null,l?p.default.createElement("div",{className:"pull-right"},p.default.createElement(f.Button,{bsStyle:d?"default":"primary",disabled:r,onClick:n.handleCollectToggle},m)):null,p.default.createElement("h1",{className:"topic-header"},p.default.createElement("p",null,o),p.default.createElement("p",{className:"topic-changes"},p.default.createElement("small",null,p.default.createElement("span",null,"发布于 "+s.substring(0,10)),p.default.createElement("span",null,"作者 "+u.loginname),p.default.createElement("span",null,c+" 次浏览"),p.default.createElement("span",null,"来自 "+i)))))},n.renderTopicDetail=function(){var e=n.state,t=e.loading,a=e.topic;return t||!a?p.default.createElement("div",null,"loading..."):p.default.createElement(j.default,{html:a.content})},n.renderReplies=function(){return p.default.createElement(f.Panel,{className:"replies",header:n.renderRepliesHeader()},n.renderRepliesList())},n.renderRepliesHeader=function(){var e=n.state,t=e.loading,a=e.topic;return!t&&a&&a.replies?p.default.createElement("div",null,a.replies.length+" 回复"):null},n.renderRepliesList=function(){var e=n.context.user,t=n.state,a=t.loading,r=t.topic;if(a||!r||!r.replies)return null;var l=e&&e.id||"";return p.default.createElement("div",null,r.replies.map(function(e,t){return p.default.createElement(k.default,Object.assign({},e,{index:t+1,key:e.id,isFavorite:e.ups&&e.ups.indexOf(l)>=0,onFavorite:n.handleFavorite,onReply:n.handleReplyReply}))}))},n.renderReplyRealese=function(){var e=n.state,t=e.repltTarget,a=e.replyReleasing,r=t?n.findReplyById(t):null;return p.default.createElement(f.Panel,{ref:"replyRelease",header:r?p.default.createElement("div",null,p.default.createElement(f.Button,{className:"pull-right",bsStyle:"link",onClick:n.handleClearReply},p.default.createElement(f.Glyphicon,{glyph:"remove"})),p.default.createElement(f.Button,{bsStyle:"link",onClick:n.scrollToReplyTarget},"回复 "+(r.index+1)+" 楼 ")):"添加回复"},p.default.createElement(C.default,{ref:"replyEditor"}),p.default.createElement(f.Button,{bsStyle:"primary",disabled:a,onClick:n.handleReplyRelease},a?"回复中...":"回复"))},n.render=function(){var e=n.context.logon,t=n.state,a=t.loading,r=t.error,l=t.topic,o=!a&&l,s=e&&!a&&!r&&l;return p.default.createElement(v.default,{loading:a,error:r},p.default.createElement(E.default,{id:"TopicDetail",sidebar:n.renderSidebar()},n.renderTopic(),o?n.renderReplies():null,s?n.renderReplyRealese():null))},n.state={loading:!1,error:!1,topic:null,collecting:!1,repltTarget:void 0,replyReleasing:!1},n}return u(t,e),c(t,[{key:"componentWillMount",value:function(){this.loadTopicDetail()}},{key:"componentDidUpdate",value:function(e,t){e.params.id!==this.props.params.id&&this.loadTopicDetail()}},{key:"renderSidebar",value:function(){var e=this.state.topic;return e?p.default.createElement(P.default,{userThumbnailTitle:"作者",user:e.author}):null}}]),t}(i.Component);N.contextTypes={logon:i.PropTypes.bool,user:i.PropTypes.object,accessToken:i.PropTypes.string},t.default=N},260:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(259),l=a(r);n(348),t.default=l.default},261:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=n(0),i=r(c),p=n(18),d=n(25),f=n(85),m=a(f),b=n(83),h=r(b),y=n(29),g=r(y),v=n(240),_=r(v),E=n(35),T=r(E),j=function(e){function t(e){l(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getCurrentTab=function(){return n.props.location.query.tab||"all"},n.getCurrentPage=function(){return Number(n.props.location.query.page||1)},n.renderSidebar=function(){var e=n.context,t=e.logon,a=e.user;return i.default.createElement(T.default,{userThumbnailTitle:"个人信息",user:a,topicReleasable:t,barcodeVisible:!0})},n.state={initiated:!1,loading:!1,error:!1,topics:[]},n}return s(t,e),u(t,[{key:"componentWillMount",value:function(){this.loadTopics()}},{key:"componentDidUpdate",value:function(e,t){var n=e.location.query.tab||"all",a=this.getCurrentTab(),r=Number(e.location.query.page||1),l=this.getCurrentPage();a!==n&&this.setState({initiated:!1}),n===a&&r===l||this.loadTopics()}},{key:"loadTopics",value:function(){var e=this,t=this.getCurrentTab(),n=this.getCurrentPage();this.setState({loading:!0,error:!1}),m.getTopics(t,n,30).then(function(t){var n=t.success,a=t.error_msg,r=t.data;if(!n)throw new Error(a||"未知错误");e.setState({initiated:!0,loading:!1,topics:r})}).catch(function(t){e.setState({loading:!1,error:t.message})})}},{key:"renderTopicTab",value:function(){return i.default.createElement(p.Nav,{bsStyle:"pills"},i.default.createElement(d.IndexLinkContainer,{to:{pathname:"/",query:{tab:"all"}}},i.default.createElement(p.NavItem,null,"全部")),i.default.createElement(d.LinkContainer,{to:{pathname:"/",query:{tab:"good"}}},i.default.createElement(p.NavItem,null,"精华")),i.default.createElement(d.LinkContainer,{to:{pathname:"/",query:{tab:"share"}}},i.default.createElement(p.NavItem,null,"分享")),i.default.createElement(d.LinkContainer,{to:{pathname:"/",query:{tab:"ask"}}},i.default.createElement(p.NavItem,null,"问答")),i.default.createElement(d.LinkContainer,{to:{pathname:"/",query:{tab:"job"}}},i.default.createElement(p.NavItem,null,"招聘")))}},{key:"renderTopicList",value:function(){var e=this.props.location,t=this.state,n=t.initiated,a=t.loading,r=t.error,l=t.topics,o=a&&!n,s=e.query||{},u=this.getCurrentPage(),c=u>1,f=c?u-1:1,m=l&&l.length>0,b=m?u+1:u;return i.default.createElement(h.default,{loading:o,error:r},m?l.map(function(e){return i.default.createElement(_.default,Object.assign({key:e.id},e))}):i.default.createElement("div",null,"没有更多数据..."),i.default.createElement(h.default,{loading:a,error:r},i.default.createElement(p.Pager,null,i.default.createElement(d.IndexLinkContainer,{to:{pathname:"/",query:Object.assign({},s,{page:f})}},i.default.createElement(p.Pager.Item,{disabled:!c},"上一页"))," ",i.default.createElement(d.IndexLinkContainer,{to:{pathname:"/",query:Object.assign({},s,{page:b})}},i.default.createElement(p.Pager.Item,{disabled:!m},"下一页")))))}},{key:"render",value:function(){return i.default.createElement(g.default,{id:"TopicList",sidebar:this.renderSidebar()},i.default.createElement(p.Panel,{header:this.renderTopicTab()},this.renderTopicList()))}}]),t}(c.Component);j.contextTypes={logon:c.PropTypes.bool,user:c.PropTypes.object},t.default=j},262:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(261),l=a(r);n(349),t.default=l.default},263:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),p=r(i),d=n(18),f=n(25),m=n(85),b=a(m),h=n(86),y=r(h),g=n(29),v=r(g),_=n(136),E=r(_),T=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getContent=function(){var e=n.refs.editor;return e?e.getMarkdownText():""},n.handleFieldChange=function(e){var t=e.nativeEvent.target;n.setState(l({},t.name,t.value))},n.handleRelease=function(){var e=n.state,t=e.tab,a=e.title;if(t&&a&&!(a.length<10)){var r=n.context.accessToken,l=n.getContent();l&&l.trim()&&(n.setState({submitting:!0}),b.addTopic(r,t,a,l).then(function(e){var t=e.success,a=e.error_msg,r=e.topic_id;if(!t)throw new Error(a||"未知错误");n.context.router.replace("/topic/"+r)}).catch(function(e){n.setState({submitting:!1})}))}},n.renderSidebar=function(){return p.default.createElement("div",null,p.default.createElement(d.Panel,{header:"关于"},p.default.createElement("p",null,"### 单行的标题"),p.default.createElement("p",null,"**粗体**"),p.default.createElement("p",null,"`console.log('行内代码')`"),p.default.createElement("p",null,"```js\\n code \\n``` 标记代码块"),p.default.createElement("p",null,"[内容](链接)"),p.default.createElement("p",null,"![文字说明](图片链接)"),p.default.createElement("p",null,p.default.createElement("a",{href:"https://segmentfault.com/markdown"},"Markdown 文档"))),p.default.createElement(d.Panel,{header:"话题发布指南"},p.default.createElement("p",null,"尽量把话题要点浓缩到标题里"),p.default.createElement("p",null,p.default.createElement("span",null,"代码含义和报错可在"),p.default.createElement("a",{href:"http://segmentfault.com/t/node.js"},"SegmentFault"),p.default.createElement("span",null,"提问"))))},n.state={tab:"",title:"",submitting:!1},n}return u(t,e),c(t,[{key:"render",value:function(){var e=this.state.submitting;return p.default.createElement(v.default,{className:"TopicRelease",sidebar:this.renderSidebar()},p.default.createElement(d.Panel,{header:p.default.createElement(d.Breadcrumb,null,p.default.createElement(f.LinkContainer,{onlyActiveOnIndex:!0,to:"/"},p.default.createElement(d.Breadcrumb.Item,null,p.default.createElement("span",null,"主页"))),p.default.createElement(d.Breadcrumb.Item,{active:!0},"发布话题"))},p.default.createElement(d.Form,null,p.default.createElement(d.FormGroup,null,p.default.createElement(d.FormControl,{componentClass:"select",name:"tab",onChange:this.handleFieldChange},p.default.createElement("option",{value:""},"请选择板块"),p.default.createElement("option",{value:"share"},"分享"),p.default.createElement("option",{value:"ask"},"问答"),p.default.createElement("option",{value:"job"},"招聘"))),p.default.createElement(d.FormGroup,null,p.default.createElement(d.FormControl,{type:"text",name:"title",onChange:this.handleFieldChange,placeholder:"标题字数 10 字以上"})),p.default.createElement(d.FormGroup,null,p.default.createElement(E.default,{ref:"editor"})),p.default.createElement(d.FormGroup,null,p.default.createElement(d.Button,{bsStyle:"primary",onClick:this.handleRelease,disabled:e},e?"提交中...":"提交")))))}}]),t}(i.Component);T.contextTypes={logon:i.PropTypes.bool,accessToken:i.PropTypes.string,router:i.PropTypes.object},t.default=(0,y.default)(T)},264:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(263),l=a(r);n(350),t.default=l.default},265:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),p=r(i),d=n(18),f=n(25),m=n(137),b=a(m),h=n(83),y=r(h),g=n(29),v=r(g),_=n(35),E=r(_),T=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.loadUserInfo=function(){n.setState({loading:!0,error:null}),b.getUserInfo(n.props.params.loginname).then(function(e){var t=e.success,a=e.error_msg,r=e.data;if(!t)throw new Error(a);var o=r.recent_topics,s=r.recent_replies,u=l(r,["recent_topics","recent_replies"]);n.setState({loading:!1,user:u,recentTopics:o,recentReplies:s})}).catch(function(e){
n.setState({loading:!1,error:e.message})})},n.renderUserIntroduce=function(){var e=n.state.user;if(!e)return null;var t=e.avatar_url,a=e.githubUsername,r=e.create_at,l=e.score,o="https://github.com/"+a;return p.default.createElement(d.Panel,{className:"userinfo",header:p.default.createElement(d.Breadcrumb,null,p.default.createElement(f.LinkContainer,{onlyActiveOnIndex:!0,to:"/"},p.default.createElement(d.Breadcrumb.Item,null,p.default.createElement("span",null,"主页"))),p.default.createElement(d.Breadcrumb.Item,{active:!0},"用户详情"))},p.default.createElement("ul",null,p.default.createElement("li",null,p.default.createElement("img",{className:"useravatar",src:t,alt:"头像"})),p.default.createElement("li",null,"loginname"),p.default.createElement("li",null,l+" 积分"),p.default.createElement("li",null,p.default.createElement("span",null,"Github"),p.default.createElement("a",{href:o},"  "+a)),p.default.createElement("li",null,p.default.createElement("span",null,"注册时间"),p.default.createElement("span",null,"  "+r))))},n.renderRecentTopics=function(){return p.default.createElement(d.Panel,{className:"recenttopics",header:"最近创建的话题"})},n.renderRecentReplies=function(){return p.default.createElement(d.Panel,{className:"recentreplies",header:"最近参与的话题"})},n.renderSidebar=function(){var e=n.context.logon,t=n.state.user;return p.default.createElement(E.default,{userThumbnailTitle:"个人信息",user:t,topicReleasable:e,barcodeVisible:!0})},n.render=function(){var e=n.state,t=e.loading,a=e.error;return p.default.createElement("div",{id:"UserInfo"},p.default.createElement(y.default,{loading:t,error:a},p.default.createElement(v.default,{sidebar:n.renderSidebar()},n.renderUserIntroduce())))},n.state={loading:!1,error:null,user:null,recentTopics:null,recentReplies:null},n}return u(t,e),c(t,[{key:"componentWillMount",value:function(){this.loadUserInfo()}}]),t}(i.Component);T.contextTypes={logon:i.PropTypes.bool},t.default=T},266:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(265),l=a(r);n(351),t.default=l.default},267:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(0),p=r(i),d=n(19),f=n(18),m=n(25),b=n(137),h=a(b),y=n(29),g=r(y),v=function(e){function t(e){o(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleLogin=function(){var e=(0,d.findDOMNode)(n.refs.accessToken).value;e&&(n.setState({submitting:!0}),h.login(e).then(function(t){var a=t.success,r=t.error_msg,o=l(t,["success","error_msg"]);if(n.setState({submitting:!1}),a){var s=n.context.onLogin;s&&s(e,o)}else console.log(r)}).catch(function(e){console.log(e),n.setState({submitting:!1})}))},n.renderSidebar=function(){return p.default.createElement(f.Panel,{header:"关于"},p.default.createElement("p",null,"CNode：Node.js专业中文社区"),p.default.createElement("p",null,"在这里你可以："),p.default.createElement("ul",null,p.default.createElement("li",null,"向别人提出你遇到的问题"),p.default.createElement("li",null,"帮助遇到问题的人"),p.default.createElement("li",null,"分享自己的知识"),p.default.createElement("li",null,"和其它人一起进步")))},n.state={submitting:!1},n}return u(t,e),c(t,[{key:"render",value:function(){var e=this.state.submitting;return p.default.createElement(g.default,{id:"UserLogin",sidebar:this.renderSidebar()},p.default.createElement(f.Panel,{header:p.default.createElement(f.Breadcrumb,null,p.default.createElement(m.LinkContainer,{onlyActiveOnIndex:!0,to:"/"},p.default.createElement(f.Breadcrumb.Item,null,p.default.createElement("span",null,"主页"))),p.default.createElement(f.Breadcrumb.Item,{active:!0},"登录"))},p.default.createElement(f.Row,null,p.default.createElement(f.Col,{smOffset:2,sm:8,mdOffset:2,md:8,lgOffset:3,lg:6},p.default.createElement(f.Form,null,p.default.createElement(f.FormGroup,null,p.default.createElement(f.ControlLabel,null,"Access Token"),p.default.createElement(f.FormControl,{ref:"accessToken",type:"text"})),p.default.createElement(f.FormGroup,null,p.default.createElement(f.Button,{bsStyle:"link",className:"pull-right"},"如何获取 Access Token？"),p.default.createElement(f.Button,{bsStyle:"primary",disabled:e,onClick:e?null:this.handleLogin},e?"登录中...":"登录")))))))}}]),t}(i.Component);v.contextTypes={logon:i.PropTypes.bool,onLogin:i.PropTypes.func},t.default=v},268:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(267),l=a(r);n(352),t.default=l.default},269:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),u=a(s),c=n(18),i=n(25),p=n(86),d=a(p),f=n(29),m=a(f),b=n(35),h=a(b),y=function(e){function t(){var e,n,a,o;r(this,t);for(var s=arguments.length,p=Array(s),d=0;d<s;d++)p[d]=arguments[d];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(p))),a.isLogon=function(){var e=a.context.logon;return e},a.renderUpdatForm=function(){return a.isLogon()?u.default.createElement(c.Panel,{header:u.default.createElement(c.Breadcrumb,null,u.default.createElement(i.LinkContainer,{onlyActiveOnIndex:!0,to:"/"},u.default.createElement(c.Breadcrumb.Item,null,u.default.createElement("span",null,"主页"))),u.default.createElement(c.Breadcrumb.Item,{active:!0},"设置"))},"N/A"):null},a.renderSidebar=function(){if(!a.isLogon())return null;var e=a.context,t=e.logon,n=e.user;return u.default.createElement(h.default,{userThumbnailTitle:"个人信息",user:n,topicReleasable:t,barcodeVisible:!0})},a.render=function(){return u.default.createElement("div",{id:"UserSetting"},u.default.createElement(m.default,{sidebar:a.renderSidebar()},a.renderUpdatForm()))},o=n,l(a,o)}return o(t,e),t}(s.Component);y.contextTypes={logon:s.PropTypes.bool,user:s.PropTypes.object},t.default=(0,d.default)(y)},270:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(269),l=a(r);n(353),t.default=l.default},271:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),l=a(r),o=n(61),s=n(251),u=a(s),c=n(262),i=a(c),p=n(264),d=a(p),f=n(260),m=a(f),b=n(268),h=a(b),y=n(266),g=a(y),v=n(270),_=a(v),E=n(258),T=a(E),j=n(254),O=a(j),P=n(246),w=a(P),k=n(249),S=a(k),C=n(256),N=a(C);t.default=l.default.createElement(o.Route,{path:"/",component:u.default},l.default.createElement(o.IndexRoute,{component:i.default}),l.default.createElement(o.Route,{path:"/topic/create",component:d.default}),l.default.createElement(o.Route,{path:"/topic/:id",component:m.default}),l.default.createElement(o.Route,{path:"/signin",component:h.default}),l.default.createElement(o.Route,{path:"/user/:loginname",component:g.default}),l.default.createElement(o.Route,{path:"/setting",component:_.default}),l.default.createElement(o.Route,{path:"/my/messages",component:T.default}),l.default.createElement(o.Route,{path:"/getstart",component:O.default}),l.default.createElement(o.Route,{path:"/api",component:w.default}),l.default.createElement(o.Route,{path:"/about",component:S.default}),l.default.createElement(o.Route,{path:"*",component:N.default}))},272:function(e,t,n){"use strict";function a(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=l.BASE_URL+"/topic/"+t+"/replies",o=new Headers;return o.append("Content-Type","application/json"),fetch(r,{method:"POST",headers:o,body:JSON.stringify({accesstoken:e,content:n,reply_id:a})}).then(function(e){return e.json()})}function r(e,t){var n=l.BASE_URL+"/reply/"+t+"/ups",a=new Headers;return a.append("Content-Type","application/json"),fetch(n,{method:"POST",headers:a,body:JSON.stringify({accesstoken:e})}).then(function(e){return e.json()})}Object.defineProperty(t,"__esModule",{value:!0}),t.addReply=a,t.favoriteReply=r;var l=n(84)},278:function(e,t,n){var a,r=[];e.exports=function(e){r?r.push(e):e(a)},n.e(0).then(function(e){a=n(558);var t=r;r=null;for(var l=0,o=t.length;l<o;l++)t[l](a)}.bind(null,n)).catch(n.oe)},29:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(232),l=a(r);n(333),t.default=l.default},332:function(e,t){},333:function(e,t){},334:function(e,t){},335:function(e,t){},336:function(e,t){},337:function(e,t){},338:function(e,t){},339:function(e,t){},340:function(e,t){},341:function(e,t){},342:function(e,t){},343:function(e,t){},344:function(e,t){},345:function(e,t){},346:function(e,t){},347:function(e,t){},348:function(e,t){},349:function(e,t){},35:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(238),l=a(r);n(337),t.default=l.default},350:function(e,t){},351:function(e,t){},352:function(e,t){},353:function(e,t){},547:function(e,t,n){e.exports=n(227)},62:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(241),l=a(r);n(339),t.default=l.default},83:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(233),l=a(r);n(334),t.default=l.default},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BASE_URL="https://cnodejs.org/api/v1"},85:function(e,t,n){"use strict";function a(e,t,n){var a=u.BASE_URL+"/topics?tab="+e+"&page="+t+"&limit="+n;return fetch(a).then(function(e){return e.json()})}function r(e,t){var n=u.BASE_URL+"/topic/"+t+"?accesstoken="+(e||"");return fetch(n).then(function(e){return e.json()})}function l(e,t,n,a){var r=u.BASE_URL+"/topics",l=new Headers;return l.append("Content-Type","application/json"),fetch(r,{method:"POST",headers:l,body:JSON.stringify({accesstoken:e,tab:t,title:n,content:a})}).then(function(e){return e.json()})}function o(e,t){var n=u.BASE_URL+"/topic_collect/collect",a=new Headers;return a.append("Content-Type","application/json"),fetch(n,{method:"POST",headers:a,body:JSON.stringify({accesstoken:e,topic_id:t})}).then(function(e){return e.json()})}function s(e,t){var n=u.BASE_URL+"/topic_collect/de_collect",a=new Headers;return a.append("Content-Type","application/json"),fetch(n,{method:"POST",headers:a,body:JSON.stringify({accesstoken:e,topic_id:t})}).then(function(e){return e.json()})}Object.defineProperty(t,"__esModule",{value:!0}),t.getTopics=a,t.getTopicById=r,t.addTopic=l,t.collectTopic=o,t.deCollectTopic=s;var u=n(84)},86:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function n(){var t,a,o,s;r(this,n);for(var c=arguments.length,i=Array(c),p=0;p<c;p++)i[p]=arguments[p];return a=o=l(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(i))),o.render=function(){var t=o.context.logon;return t?u.default.createElement(e,o.props):u.default.createElement("div",null,"forbidden!")},s=a,l(o,s)}return o(n,t),n}(s.Component);return t.contextTypes={logon:s.PropTypes.bool},t};var s=n(0),u=a(s)}},[547]);